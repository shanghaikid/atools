{
  "id": "STORY-10",
  "title": "Multi-provider failover",
  "description": "Add failover chains so when an upstream provider returns 5xx or times out, the proxy automatically retries with the next provider in the chain.",
  "priority": "high",
  "sprint": 1,
  "status": "done",
  "branch": "feat/STORY-10-multi-provider-failover",
  "merge_commit": null,
  "acceptance_criteria": [
    "New internal/failover package with chain lookup and IsRetryable(statusCode)",
    "Config supports failover.max_retries and failover.chains mapping",
    "Extract doUpstreamRequest() helper from proxy, wrap with retry loop",
    "Only retries on 5xx/timeout, not 4xx",
    "failover_from column added to requests table via schema migration",
    "Records original model in failover_from when failover occurs",
    "All tests pass, go vet clean"
  ],
  "tasks": [],
  "design": {},
  "implementation": {
    "changes": [
      "internal/failover/failover.go — failover chain resolution + IsRetryable",
      "internal/failover/failover_test.go — tests",
      "internal/config/config.go — FailoverConfig struct",
      "internal/store/sqlite.go — schema migration, failover_from column",
      "internal/proxy/proxy.go — doUpstreamRequest helper, failover retry loop",
      "cmd/start.go — failover initialization"
    ],
    "build_status": "pass"
  },
  "testing": { "tests_passed": true, "verdict": "pass" },
  "audit_log": [
    { "timestamp": "2026-02-16T00:00:00Z", "agent": "team-lead", "action": "story_created", "detail": "Created STORY-10" },
    { "timestamp": "2026-02-16T00:02:00Z", "agent": "coder", "action": "status_change", "detail": "ready → done" }
  ]
}
