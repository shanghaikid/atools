{
  "id": "STORY-1",
  "title": "Support initializing new and existing directories",
  "description": "As a user, I want ainit to initialize both a new empty folder and an existing directory that already has code, so I can adopt the multi-agent workflow for any project.",
  "priority": "high",
  "sprint": 1,
  "status": "done",
  "branch": "feat/STORY-1-init-modes",
  "merge_commit": null,
  "acceptance_criteria": [
    "ainit <new-dir> creates the directory if it doesn't exist, then runs the interactive setup",
    "ainit <existing-dir> detects language/framework from existing files (go.mod, package.json, pyproject.toml, etc.) and pre-fills defaults accordingly",
    "ainit (no args) initializes the current directory, detecting existing code if present",
    "Existing CLAUDE.md, workflow.md, backlog.json prompt for overwrite confirmation before replacing",
    "If the target directory already has a backlog.json, warn and ask before overwriting to avoid data loss",
    "Generated files are correct in both new-dir and existing-dir scenarios"
  ],
  "tasks": [
    {
      "id": "TASK-1",
      "title": "Auto-create target directory if it doesn't exist",
      "status": "done",
      "assignee": "coder",
      "description": "When the user passes a directory path that doesn't exist, create it (including parents) before proceeding with initialization."
    },
    {
      "id": "TASK-2",
      "title": "Detect language from existing project files",
      "status": "done",
      "assignee": "coder",
      "description": "Scan target directory for marker files: go.mod (Go), package.json (TypeScript/JS), pyproject.toml/setup.py/requirements.txt (Python). Use detection result to set the langKey for defaults."
    },
    {
      "id": "TASK-3",
      "title": "Extract project metadata from existing files",
      "status": "done",
      "assignee": "coder",
      "description": "Parse go.mod for module name, package.json for name/description/scripts, pyproject.toml for project name/description. Use extracted info to pre-fill prompt defaults (project name, description, build/test/lint commands)."
    },
    {
      "id": "TASK-4",
      "title": "Detect existing directory structure for DirStructure default",
      "status": "done",
      "assignee": "coder",
      "description": "When initializing an existing directory, scan top-level subdirectories and generate a tree-like DirStructure default string instead of using the language template default."
    },
    {
      "id": "TASK-5",
      "title": "Add overwrite confirmation for all generated files",
      "status": "done",
      "assignee": "coder",
      "description": "Currently only CLAUDE.md has an overwrite check. Extend to workflow.md and backlog.json. For backlog.json, add a stronger warning since it may contain existing story data."
    },
    {
      "id": "TASK-6",
      "title": "Add tests for new-dir and existing-dir scenarios",
      "status": "done",
      "assignee": "tester",
      "description": "Write tests covering: (1) new directory creation, (2) language detection from marker files, (3) metadata extraction, (4) overwrite confirmation logic, (5) directory structure detection."
    }
  ],
  "design": null,
  "implementation": null,
  "review": null,
  "testing": null,
  "audit_log": [
    {
      "timestamp": "2026-02-14T00:00:00Z",
      "agent": "team-lead",
      "action": "story_created",
      "detail": "Created STORY-1 from user requirement: support initializing new folders and existing code directories."
    },
    {
      "timestamp": "2026-02-21T11:00:00Z",
      "agent": "team-lead",
      "action": "status_changed",
      "detail": "implementing â†’ done. Functionality superseded by monorepo STORY-5 (fix all 14 issues) and STORY-7 (smart post-install customization). Language detection implemented in ainit-setup.sh detect_project_name(). Overwrite protection handled by safe_copy pattern."
    }
  ]
}
